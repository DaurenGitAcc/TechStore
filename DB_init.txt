create table user(
    id int primary key generated by default as identity,
    name varchar(130) not null,
    surname varchar(130) not null,
    tel_number varchar(15) not null,
    email varchar(130) not null,
    password varchar not null,
    avatar varchar,
    role varchar(50) not null
);
create table category(
    id int primary key generated by default as identity,
    name varchar not null unique
);
create table brand(
    id int primary key generated by default as identity ,
    name varchar not null unique,
    country varchar
);
create table product(
    id int primary key generated by default as identity ,
    name varchar not null unique ,
    description varchar,
    price int check ( price>0 ) not null,
    count int,
    photo varchar ,
    brand_id int references brand(id),
    category_id int references category(id)
);

create table purchase(
    id int primary key generated by default as identity ,
    count int,
    created_at timestamp not null ,
    product_id int references product(id),
    buyer_id int references user(id)
);

create table comment
(
    id int primary key generated by default as identity ,
    message varchar not null ,
    created_at timestamp not null ,
    author_id int references user(id) on delete set null ,
    product_id int references product(id) on delete set null
);
